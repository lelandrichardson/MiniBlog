"use strict";(function(){Function.prototype.method=function(n,t){return this.prototype[n]=t,this},Date.method("timeAgo",function(){var t=(+new Date-this.getTime())/1e3,n=Math.floor(t/86400);return n===0&&(t<60&&"just now"||t<120&&"a minute ago"||t<3600&&Math.floor(t/60)+" minutes ago"||t<7200&&"an hour ago"||t<86400&&Math.floor(t/3600)+" hours ago")||n===1&&"yesterday"||n<31&&n+" days ago"||n<60&&"one month ago"||n<365&&Math.ceil(n/30)+" months ago"||n<730&&"one year ago"||Math.ceil(n/365)+" years ago"}),String.method("format",function(){var n=arguments;return this.replace(/{(\d+)}/g,function(t,i){return typeof n[i]!="undefined"?n[i]:t})}),Number.method("toShortString",function(){var n=this,t=function(n,t){return Math.round(n*Math.pow(10,t))/Math.pow(10,t)};return n<1e3?""+n:n<1e4?t(n/1e3,1)+"k":t(n/1e3,0)+"k"})})();var MiniBlogApp=function(n,t){var i={},r;return t=t||{},r=n.$,i.$=r,i.extend=function(u,f,e){u(i,r.extend(n,f||{}),r.extend(t,e||{}))},i.ajaxUrl=n.ajaxUrl||"/ajax",t.enableStyleCode=n.enableStyleCode||!0,t.styleOnLoad=n.styleOnLoad||!0,i.styleCode=function(){if(!t.enableStyleCode)return;var n=!1;r("pre code").parent().each(function(){r(this).hasClass("prettyprint")||(r(this).addClass("prettyprint"),n=!0)}),n&&prettyPrint()},i.api=function(n){if(!n.url)return;var t={url:i.apiRootUrl+n.url,type:n.method||n.hasOwnProperty("data")?"POST":"GET",processData:n.formEncode||!1,contentType:n.formEncode||!1?"application/x-www-form-urlencoded":"application/json"};n.hasOwnProperty("data")&&(t.data=t.processData?n.data:JSON.stringify(n.data),delete n.data),delete n.url,r.extend(t,n),r.ajax(t)},i.registerView=function(n){var t=!n?"{0}/vc".format(i.ajaxUrl):"{0}/vc?p={1}".format(i.ajaxUrl,n);r.get(t)},i.slug=function(n){var i=/( ?- ?)|[ ']/g,t=/[^0-9a-zA-Z-]/g;return n.replace(i,"-").replace(t,"").trim().toLowerCase()},i.init=function(){t.styleOnLoad&&i.styleCode(),r(function(){r.each(window.tprq||[],function(n,t){t()}),t.readyHasFired=!0})},i}